# Пользовательские сценарии (Use cases) — приложение «Подборочка»

---

## Первый запуск — пошаговый мастер

**Цель:** пользователь вводит (или пропускает) условно постоянные параметры: пол, рост, вес, размеры тела.

**Актор:** новый пользователь (необязательно залогинен).

**Предусловия:** приложение установлено; сеть доступна (если аккаунт нужно синхронизировать).

**Шаги:**
1. Показать экран приветствия и краткую цель сбора данных (почему это улучшит рекомендации).
1. Шаги мастера: Пол → Рост → Вес → Размеры тела (грудь/талия/бёдра или эквиваленты). На каждом шаге — выбор/ввод и кнопки «Далее» / «Пропустить».
1. В конце — экран подтверждения с кнопкой «Готово» и инструкцией или ссылкой «Как изменить эти данные позже».
1. Вывести соглашение о персональных данных в виде: «Мы используем выши фотографии только для подбоора вашего стиля. Никакие ваши материалы не будут передаваться третьим лицам без вашего явного согласия. Подробнее ознакомиться с соглашением можно тут [тык!]()».
1. По нажатии «Готово» — перенаправление на главное меню.

* **Ожидаемый результат:** параметры сохранены в профиле, если есть аккаунт, или в локальном хранилище, если аккаунта нет; пользователь попадает на главный экран.
* **Критерии приемки:** если пользователь заполнил — данные сохраняются; если пропустил — приложение работает корректно, поля в профиле пустые. Ссылка для редактирования доступна в профиле вне зависимости от запонения.
* **Пограничные случаи:** пользователь пропускает все шаги → сохранить флаг о пропуске, далее показать подсказки при взаимодействии с функционалом, требующим параметров.

---

## Главное меню

**Цель:** обеспечить быстрый доступ ко всем функциям: создать стиль (по промпту, по элементам гардероба), дополнить стиль аксессуарами по фото, чат/консультация, профиль/настройки.

**Актор:** любой пользователь.

**Предусловия:** приложение открыто, начальная настройка завершёна или пропущена.

**Шаги:**
1. Показать сетку/список карточек с опциями: «Создать стиль — по промпту», «Создать стиль — из гардероба», «Дополнить фото аксессуарами», «Чат/Консультация», «Профиль».
1. При каждой карточке — краткое описание (возможно,, по кноке **«?»**).
1. Верхняя панель: аватар (открывает профиль), уведомления, быстрый доступ к истории чата/сохранённым образам.

* **Ожидаемый результат:** пользователь может быстро начать нужный поток.
* **Критерии приемки:** навигация корректна, переходы работают.
* **Пограничные случаи:** недоступность сети — офлайн-режим ***(думаем)***.

---

## Экран «Дополнить стиль аксессуарами по фото» {#style}

**Цель:** пользователь загружает фото одежды и получает подбор аксессуаров.

**Актор:** пользователь с фото.

**Поля:** пол (авто), форма загрузки фото (поддержка drag&drop, камера, загрузка из ФС), промпт (необязательный), кнопка «Отправить».

**Шаги:**
1. Пользователь открывает экран → загружает/снимает фото.
1. (Опционально) вводит промпт
1. Пользователь выбирает целевое событие (всплывающий список).
1. Нажимает «Отправить» → запрос отправляется на сервер происходит анализ изображения (CV) + генерация рекомендаций.
1. Результат выводится в чате: рекомендации аксессуаров с картинками, пояснениями, опцией «показать похожие товары» или «сохранить образ».
* **Ожидаемый результат:** качественные, релевантные аксессуары, ссылка/реферальная карточка при наличии партнёрских товаров.
* **Критерии приемки:** в 90% тестовых кейсов система корректно распознаёт минимум три элемента одежды и предлагает три и более аксессуаров, промпт влияет на тон/стиль подборки.
* **Пограничные случаи:** 
    * размытое фото&nbsp;→ показать подсказку «загрузите фото лучше» или семплинг;
    * фото без одежды (NSFW или пейзаж)&nbsp;→ предупреждение и отказ;
    * потенциально опасное фото&nbsp;→ отказ и уведомление сервиса.

---

## Экран «Создать стиль по промпту»

**Цель:** создать целостный образ на основе текста и опционального фото.

**Актор:** пользователь, который хочет генеративный образ.

**Поля:** загрузка фото (необязательно), пол (авто), размеры тела (авто), погода (выпадающий список), куда идём (контекст: работа/вечеринка/спорт и т.д.), свободный промпт (необязательно).

**Шаги:**
1. Пользователь вводит промпт (например: «минималистичный городской лук для весны, нейтральные тона»), выбирает контекст «куда идём» и погоду.
1. (Опционально) прикрепляет фото тела/личного гардероба для персонализации.
1. Нажимает «Создать» 
1. Ассистент генерирует 3 альтернативных стиля, каждый с визуализацией (манекен) и списком рекомендованных элементов + ссылки на товары.
1. Пользователь может выбрать вариант: открыть детали, заменить/дополнить аксессуарами (перевод на сценарий [«Дополнить стиль аксессуарами»](#style)), сохранить или отправить в чат для консультации.

* **Ожидаемый результат:** 3 подходящих образа, визуализации на манекене с телом пользователя (если предоставлено).
* **Критерии приемки:** стили соответствуют промпту и учёту параметров погоды/цели; возможность редактирования и сохранения.
* **Пограничные случаи:** 
    * промпт не относится к моде&nbsp;→ ассистент отвечает: «Я могу помогать только с одеждой и стилем»;
    * промпт не соответствует контексту или погоде&nbsp;→ предупреждение с заблокированной кнопкой «Да» на 2-3с, дальнейшая работа только при подтверждении пользователем, фиксируем согласие пользователя в базе (мы предупредили пользователя о возможных проблемах);
    * размытое фото&nbsp;→ показать подсказку «загрузите фото лучше» или семплинг;
    * фото без одежды&nbsp;→ предупреждение и отказ;
    * потенциально опасное фото&nbsp;→ отказ и уведомление сервиса.

---

## Экран «Создать стиль из элементов гардероба»

**Цель:** собрать образ из загруженных пользователем вещей.

**Актор:** пользователь с уже сфотографированными/описанными элементами.

**Поля:** загрузка фото элементов с подписью (название + свободное описание), погода, куда идём.

**Шаги:**
1. Пользователь загружает по одному фото предмет (подсказка: «больше фото — лучше»), вводит название/описание (материал, размер, состояние).
1. Выбирает погоду и контекст.
1. Нажимает «Сгенерировать стиль» → ассистент анализирует элементы, предлагает комбинации (основной образ + 2 альтернативы), указывает недостающие элементы и предлагает покупки.
1. Результат — в чате с визуализацией и опцией «добавить аксессуары/заменить элемент».

* **Ожидаемый результат:** подходящие наборы из имеющихся вещей + рекомендации докупить недостающие элементы.
* **Критерии приемки:** при наличии ≥4 корректно распознанных элементов система предлагает ≥2 жизнеспособных комбинации; описание помогает распознать материал/тип.
* **Пограничные случаи:** 
    * пользователь загружает предметы разных сезонов — предложить фильтр по сезону/контексту;
    * конфликты размеров — выдавать предупреждение;
    * нессответсвие распознанного фото и подписи пользователя — уточнить у пользователя.

---

## Экран «Чат/Консультация» (центр коммуникаций)

**Цель:** унифицированный экран, куда выводятся ответы с других экранов и где проходят консультации.

**Актор:** пользователь, ассистент (ИИ), стилист (опционально — человек).

**Предусловия:** пользователь запустил запрос с любого рабочего экрана.

**Шаги:**
1. Любой запрос (дополнение по фото, генерация по промпту, подбор из гардероба) отправляет результат в чат: карточки образов, мини-галерея, текстовые пояснения, ссылки на товары.
1. В чате доступны: доработать (edit), спросить «почему так?», попросить альтернативы, запросить замену по бюджету/брендам.
1. История чата сохраняется; пользователь может закреплять сообщения/образы.
1. При необходимости — переключиться на «живую консультацию» с человеком (если есть сервис) или заказать углублённый анализ.
1. Возможно: группировка чатов.

* **Ожидаемый результат:** единый (или разделённый при группировке) поток диалога, где можно итеративно шлифовать образ.
* **Критерии приемки:** реакции на команды чата происходят корректно; ссылки и медиа отображаются; кнопки «сохранить», «купить», «поделиться» работают.
* **Пограничные случаи:** 
    * ответ слишком длинный — сворачивать;
    * несколько параллельных запросов — показывать статусы обработки.

---

## Сценарий: «Уточнение после генерации» (итерация)

**Цель:** пользователь дорабатывает результат генерации (например, стиль по промпту) через чат.

**Актор:** пользователь.

**Шаги:**
1. В чате пользователь получает 3 варианта. Нажимает «Доработать» у варианта 2.
1. Указывает: «сделай его более формальным, замени кеды на оксфорды, бюджет до 100€».
1. Ассистент возвращает обновлённую визуализацию и список товаров.

* **Ожидаемый результат:** быстрые итерации, корректное соблюдение новых ограничений (формальность, бюджет).
* **Критерии приемки:** ассистент учитывает все явные параметры (замена обуви, бюджет), сообщает если не может найти товары в заданном ценовом диапазоне.
* **Пограничные случаи** теже, что и в генерации.

---

## Сценарий: «Офлайн или медленная сеть»

**Цель:** корректная работа при проблемах сети.

**Актор:** пользователь.

**Шаги/Ожидание:**
1. Пользователь пытается отправить фото/промпт, сеть медленная/отсутствует.
1. Приложение: очередь запросов + локальная предварительная обработка (если возможно), уведомление «Запрос будет отправлен при восстановлении связи» и возможность отмены.

* **Критерии приемки:** UX не ломается, пользователь понимает статус.

---

## Сценарий: «Приватность и права на изображения»

**Цель:** защитить пользовательские фото и объяснить, как они используются.

**Актор:** пользователь.

**Шаги:**
1. При первой загрузке фото показать краткий диалог/согласие: как используются фото, где хранятся, опция «хранить только локально».
1. В настройках — управление разрешениями, удаление всех загруженных фото.

* **Критерии приемки:** пользователь может удалить все фото и данные, приложение соблюдает обещанное (локально/сервер).

---

## 11. Сценарий: «Рекомендации партнёров и реферальные ссылки»

**Цель:** показать товары партнёров ненавязчиво, с учётом приоритетов.

**Актор:** пользователь, система рекомендаций.

**Шаги:**
1. При генерации образа ассистент предлагает подходящие товары: пометка «Рекомендовано» + ценовой ориентир + источник.
1. При клике по товару — открытие карточки партнёра (с возможной отметкой «реферальная ссылка»).
1. Если покупка была совершена в рамках N-дней — система фиксирует реферал.

* **Критерии приемки:** реклама редкая, релевантная, с прозрачной пометкой.

---

## 11. Сценарий: «Создать стиль для экстремальной погоды / безопасность»

**Цель:** система не предлагает опасные варианты (например, платье при −30°C без верхней одежды).

**Актор:** пользователь.

**Шаги:**
1. При выборе погодного параметра (или определении погоды по GPS) система накладывает ограничения на рекомендации.
1. Если пользователь настаивает («я всё равно хочу лёгкое платье»), показать предупреждение о рисках, подтвердить действие и зафиксировать решение пользователя в сервисе.

* **Критерии приемки:** система не предлагает опасных для здоровья рекомендаций без явного подтверждения от пользователя.

---

## 11. Сценарий: «Поиск похожих товаров / отслеживание желаемого» (похже)

**Цель:** дать пользователю возможность отслеживать выбранные товары и получать уведомления (скидки, поступление).

**Актор:** пользователь.

**Шаги:**
1. В карточке товара — кнопка «Следить» / «Добавить в список желаний».
1. При появлении скидки/поступлении — пуш/уведомление и сообщение в чате.

* **Критерии приемки:** трекинг работает для партнёров, у пользователя есть управление уведомлениями.

---

### Дополнительно

1. Все экраны поддерживают автозаполнение данных из профиля, при отсутствии — показывают подсказку.
1. Все медиа (фото, визуализации) открываются в полноэкранном просмотре, их можно сохранить/поделиться.
1. Чат хранит историю и позволяет закреплять/удалять записи.
1. Любой генеративный визуальный результат создаётся на манекене с параметрами тела пользователя (если предоставлены) и без генерации/редактирования лиц (настраиваемо в профиле).
1. UX: везде должна быть кнопка «Назад», «Отмена» и «Помощь/Как это работает».